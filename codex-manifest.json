{"files": [{"path": "index.html", "content": "<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\" />\n  <title>Diablo 2-like Mini</title>\n  <link rel=\"stylesheet\" href=\"style.css\" />\n</head>\n<body>\n  <div id=\"ui\">\n    <h1>Diablo 2-like Mini</h1>\n    <p>Select your class:</p>\n    <div id=\"class-selection\"></div>\n    <button id=\"start\">Start Game</button>\n    <div id=\"stats\"></div>\n    <div id=\"log\"></div>\n  </div>\n  <canvas id=\"game\" width=\"800\" height=\"450\"></canvas>\n  <script src=\"main.js\"></script>\n</body>\n</html>\n"}, {"path": "style.css", "content": "body {\n  margin: 0;\n  font-family: Arial, sans-serif;\n  background: #111;\n  color: #eee;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n#ui {\n  width: 800px;\n  padding: 10px;\n  background: #222;\n  box-sizing: border-box;\n}\n\n#class-selection {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 10px;\n}\n\n.class-card {\n  background: #333;\n  border: 1px solid #444;\n  padding: 8px;\n  width: 200px;\n  cursor: pointer;\n}\n\n.class-card.selected {\n  border: 2px solid #76ff03;\n}\n\nbutton {\n  padding: 6px 12px;\n  margin-bottom: 8px;\n}\n\n#stats {\n  margin-top: 8px;\n  font-size: 14px;\n}\n\n#log {\n  margin-top: 8px;\n  height: 80px;\n  overflow-y: auto;\n  background: #181818;\n  padding: 6px;\n  border: 1px solid #333;\n  font-size: 12px;\n}\n\ncanvas {\n  border: 1px solid #333;\n  background: #0b0b0b;\n}\n"}, {"path": "main.js", "content": "const classes = [\n  {\n    id: \"elementalist\",\n    name: \"Elementalist\",\n    desc: \"Master of lightning and fire. Ranged bursts.\",\n    color: \"cyan\",\n    stats: { hp: 120, damage: 8, speed: 2.2, range: 80 }\n  },\n  {\n    id: \"blood_knight\",\n    name: \"Blood Knight\",\n    desc: \"Leeches life, heavy hits.\",\n    color: \"red\",\n    stats: { hp: 180, damage: 12, speed: 1.5, range: 40 }\n  },\n  {\n    id: \"shadow_warden\",\n    name: \"Shadow Warden\",\n    desc: \"Fast and elusive assassin.\",\n    color: \"purple\",\n    stats: { hp: 100, damage: 10, speed: 2.8, range: 60 }\n  }\n];\n\nconst canvas = document.getElementById(\"game\");\nconst ctx = canvas.getContext(\"2d\");\nconst classSelectionEl = document.getElementById(\"class-selection\");\nconst startBtn = document.getElementById(\"start\");\nconst statsEl = document.getElementById(\"stats\");\nconst logEl = document.getElementById(\"log\");\n\nlet selectedClass = classes[0];\nlet gameRunning = false;\nlet player = null;\nlet enemies = [];\nlet keys = {};\nlet lastTime = 0;\n\nfunction log(msg) {\n  const p = document.createElement(\"div\");\n  p.textContent = msg;\n  logEl.appendChild(p);\n  logEl.scrollTop = logEl.scrollHeight;\n}\n\nfunction renderClassSelection() {\n  classSelectionEl.innerHTML = \"\";\n  classes.forEach((c) => {\n    const card = document.createElement(\"div\");\n    card.className = \"class-card\" + (selectedClass.id === c.id ? \" selected\" : \"\");\n    card.innerHTML = `<strong>${c.name}</strong><br>${c.desc}<br>HP: ${c.stats.hp} DMG: ${c.stats.damage}`;\n    card.onclick = () => {\n      selectedClass = c;\n      renderClassSelection();\n    };\n    classSelectionEl.appendChild(card);\n  });\n}\n\nfunction updateStats() {\n  if (!player) return;\n  statsEl.textContent = `Class: ${selectedClass.name} | HP: ${Math.max(0, Math.floor(player.hp))} | Enemies left: ${enemies.length}`;\n}\n\nfunction spawnEnemies(count = 6) {\n  enemies = [];\n  for (let i = 0; i < count; i++) {\n    enemies.push({\n      x: Math.random() * (canvas.width - 40) + 20,\n      y: Math.random() * (canvas.height - 40) + 20,\n      hp: 40 + Math.random() * 30,\n      speed: 1 + Math.random() * 0.6,\n      color: \"#7f5\",\n      radius: 12\n    });\n  }\n}\n\nfunction startGame() {\n  player = {\n    x: canvas.width / 2,\n    y: canvas.height / 2,\n    hp: selectedClass.stats.hp,\n    damage: selectedClass.stats.damage,\n    speed: selectedClass.stats.speed,\n    range: selectedClass.stats.range,\n    color: selectedClass.color,\n    radius: 14\n  };\n  spawnEnemies();\n  gameRunning = true;\n  lastTime = performance.now();\n  log(`Started as ${selectedClass.name}`);\n  window.requestAnimationFrame(loop);\n}\n\nfunction handleInput(dt) {\n  if (!player) return;\n  const sp = player.speed * dt * 0.1;\n  if (keys[\"w\"]) player.y -= sp;\n  if (keys[\"s\"]) player.y += sp;\n  if (keys[\"a\"]) player.x -= sp;\n  if (keys[\"d\"]) player.x += sp;\n  player.x = Math.max(player.radius, Math.min(canvas.width - player.radius, player.x));\n  player.y = Math.max(player.radius, Math.min(canvas.height - player.radius, player.y));\n}\n\nfunction distance(a, b) {\n  const dx = a.x - b.x;\n  const dy = a.y - b.y;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nfunction attack() {\n  if (!player) return;\n  let target = null;\n  let minDist = Infinity;\n  for (const e of enemies) {\n    const d = distance(player, e);\n    if (d < minDist) {\n      minDist = d;\n      target = e;\n    }\n  }\n  if (target && minDist <= player.range + target.radius) {\n    target.hp -= player.damage;\n    if (target.hp <= 0) {\n      enemies = enemies.filter((en) => en !== target);\n      log(\"Enemy slain!\");\n    }\n  }\n}\n\nfunction enemyAI(dt) {\n  if (!player) return;\n  const spMult = dt * 0.05;\n  for (const e of enemies) {\n    const dx = player.x - e.x;\n    const dy = player.y - e.y;\n    const len = Math.sqrt(dx * dx + dy * dy) || 1;\n    e.x += (dx / len) * e.speed * spMult;\n    e.y += (dy / len) * e.speed * spMult;\n    // damage player on contact\n    if (distance(player, e) < player.radius + e.radius) {\n      player.hp -= 0.2 * dt * 0.06; // slow drain\n    }\n  }\n}\n\nfunction draw() {\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  // draw player\n  if (player) {\n    ctx.fillStyle = player.color;\n    ctx.beginPath();\n    ctx.arc(player.x, player.y, player.radius, 0, Math.PI * 2);\n    ctx.fill();\n  }\n  // draw enemies\n  enemies.forEach((e) => {\n    ctx.fillStyle = e.color;\n    ctx.beginPath();\n    ctx.arc(e.x, e.y, e.radius, 0, Math.PI * 2);\n    ctx.fill();\n    // hp bar\n    ctx.fillStyle = \"#222\";\n    ctx.fillRect(e.x - 12, e.y - e.radius - 10, 24, 4);\n    ctx.fillStyle = \"#0f0\";\n    ctx.fillRect(e.x - 12, e.y - e.radius - 10, Math.max(0, (e.hp / 70) * 24), 4);\n  });\n}\n\nfunction checkWinLose() {\n  if (!player) return;\n  if (player.hp <= 0) {\n    gameRunning = false;\n    log(\"You have fallen. Game Over.\");\n  } else if (enemies.length === 0) {\n    gameRunning = false;\n    log(\"All enemies cleared! Victory!\");\n  }\n}\n\nfunction loop(timestamp) {\n  const dt = timestamp - lastTime;\n  lastTime = timestamp;\n  if (!gameRunning) return;\n\n  handleInput(dt);\n  enemyAI(dt);\n  draw();\n  checkWinLose();\n  updateStats();\n  window.requestAnimationFrame(loop);\n}\n\nrenderClassSelection();\nupdateStats();\n\nstartBtn.onclick = () => {\n  if (gameRunning) return;\n  startGame();\n};\n\nwindow.addEventListener(\"keydown\", (e) => {\n  keys[e.key.toLowerCase()] = true;\n  if (e.key === \" \" || e.key.toLowerCase() === \"k\") {\n    attack();\n  }\n});\n\nwindow.addEventListener(\"keyup\", (e) => {\n  keys[e.key.toLowerCase()] = false;\n});\n"}]}